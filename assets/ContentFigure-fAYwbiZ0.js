var ue=Object.defineProperty,me=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var U=(n,t,s)=>t in n?ue(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,Z=(n,t)=>{for(var s in t||(t={}))fe.call(t,s)&&U(n,s,t[s]);if(Q)for(var s of Q(t))pe.call(t,s)&&U(n,s,t[s]);return n},J=(n,t)=>me(n,he(t));import{c as ne,j as e,r as i,M as O,C as P,T as xe,u as ye,m as W,ad as ge}from"./index-BEOxzR5S.js";import{d as we,u as je,s as F,A as Ce}from"./Header-CpYqL4Ym.js";import{S as se,c as be}from"./PageIntro-cjSRAWnp.js";const ve=ne(e.jsx("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H7.07L2.4 12l4.66-7H22zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"})),Ee=ne(e.jsx("path",{d:"M18.5 3H6c-1.1 0-2 .9-2 2v5.71c0 3.83 2.95 7.18 6.78 7.29 3.96.12 7.22-3.06 7.22-7v-1h.5c1.93 0 3.5-1.57 3.5-3.5S20.43 3 18.5 3M16 5v3H6V5zm2.5 3H18V5h.5c.83 0 1.5.67 1.5 1.5S19.33 8 18.5 8M5 19h14c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1"})),Se=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ne=n=>{const t=document.createElement("textarea");return t.innerHTML=n,t.value},ke=n=>n%10===1&&n%100!==11?"результат":n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?"результата":"результатов",Le=["ctrl","alt","shift","win","cmd"],Te={control:"ctrl",windows:"win",command:"cmd"},_=n=>{const t=document.createElement("div");return t.innerHTML=n,t.textContent||t.innerText||""},Me=/[^a-zа-яё0-9+\-=()]/gi,Ae=/ё/gi,I=n=>n.toLowerCase().replace(Ae,"е").replace(Me," ").replace(/\s+/g," ").trim(),Ie=n=>Le.some(t=>n.toLowerCase().includes(t)),R=n=>{let t=n.toLowerCase();return Object.entries(Te).forEach(([s,o])=>{t=t.replace(new RegExp(s,"g"),o)}),t.replace(/\s*\+\s*/g," ").replace(/\s+/g," ").trim()},qe=n=>{var s;const t=n.querySelectorAll("mark.key");return t.length>0?Array.from(t).map(o=>{var l;return((l=o.textContent)==null?void 0:l.toLowerCase())||""}).join(" "):((s=n.textContent)==null?void 0:s.toLowerCase())||""},Y=new Map,z=(n,t,s)=>{if(s){const r=R(n),c=R(t.join(" "));return r.includes(c)}const o=t.join("|");if(!Y.has(o)){const r=t.map(c=>"(?=.*".concat(Se(I(c)),")")).join("");Y.set(o,new RegExp("^".concat(r,".*$")))}return Y.get(o).test(I(n))},De=(n,t,s)=>{const o=n.textContent||"";return z(o,t,s)?o:""},Re=n=>{const t=n.tagName;return t==="LI"||t==="P"},B=n=>{const t=n.cloneNode(!0);return t.querySelectorAll(".figure-container").forEach(s=>s.remove()),t},He=(n,t,s)=>{const o=n.querySelector("ul");if(!o)return{result:B(n).outerHTML,matchCount:1};const r=Array.from(o.querySelectorAll("li")).filter(f=>z(f.textContent||"",t,s)),c=B(n);if(r.length===0)return{result:c.outerHTML,matchCount:1};const m=document.createElement("ul");r.forEach(f=>{const C=B(f);m.appendChild(C)});const u=c.querySelector("ul");return u&&u.replaceWith(m),{result:c.outerHTML,matchCount:r.length+1}},$e=(n,t,s)=>{let o="",l=0;return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===Node.TEXT_NODE){const c=De(r,t,s);c&&(o+=c,l+=1);return}if(r.nodeType===Node.ELEMENT_NODE){const c=r;if(c.classList.contains("figure-container"))return;const m=V(c,t,s);m.result&&(o+=m.result,l+=m.matchCount)}}),{result:o,matchCount:l}},V=(n,t,s)=>{if(Re(n)){const o=n.innerText||"";return z(o,t,s)?n.tagName==="LI"?He(n,t,s):{result:B(n).outerHTML,matchCount:1}:{result:"",matchCount:0}}return $e(n,t,s)},Oe=(n,t,s)=>{const l=Array.from(n.querySelectorAll("tr")).filter(r=>Array.from(r.querySelectorAll("td")).some(m=>{const u=qe(m);return z(u,t,s)}));if(l.length>0){const r=document.createElement("table"),c=n.querySelector("thead");c&&r.appendChild(c.cloneNode(!0));const m=document.createElement("tbody");return l.forEach(u=>m.appendChild(u.cloneNode(!0))),r.appendChild(m),r.outerHTML}return null},oe=n=>{const t=n.querySelector("details > p, details > div > p");if(t){const o=t.cloneNode(!0);return o.querySelectorAll(".figure-container").forEach(l=>l.remove()),o.outerHTML}const s=n.firstElementChild;if(s){const o=s.cloneNode(!0);return o.querySelectorAll(".figure-container").forEach(l=>l.remove()),o.outerHTML}return""},Pe=n=>Array.from(n).some(t=>Array.from(t.querySelectorAll("th")).some(o=>{var r;const l=((r=o.textContent)==null?void 0:r.toLowerCase())||"";return l.includes("комбинация")||l.includes("действие")})),ze=(n,t,s)=>{let o={result:"",matchCount:0};return n.querySelectorAll("ul > li").forEach(r=>{const c=V(r,t,s);c.matchCount>o.matchCount&&(o=c)}),o.result||n.querySelectorAll("p").forEach(c=>{const m=V(c,t,s);m.matchCount>o.matchCount&&(o=m)}),o},Fe=(n,t,s)=>{const o=n.querySelectorAll("table");if(o.length>0){if(Pe(o))for(const l of Array.from(o)){const r=Oe(l,t,s);if(r)return r}return o[0].outerHTML}return oe(n)},_e=(n,t)=>{var m,u;const s=document.createElement("div");s.innerHTML=n,s.querySelectorAll(".ant-divider, .ant-divider-inner-text").forEach(f=>f.remove());const o=Ie(t.join(" ")),l=(m=s.querySelector("[data-tags]"))==null?void 0:m.getAttribute("data-tags"),r=(u=s.querySelector("summary h3"))==null?void 0:u.textContent;if(l&&z(l,t,o)||r&&z(r,t,o))return oe(s);const c=ze(s,t,o);return c.result?c.result:Fe(s,t,o)},re=n=>{n.querySelectorAll(".figure-container").forEach(t=>t.remove())},Be=(n,t,s,o)=>{const l=n.filter(m=>t.includes(m)),r=n.filter(m=>s.includes(m)),c=n.filter(m=>o.includes(m));return{titleMatches:l,tagMatches:r,contentMatches:c}},Ye=(n,t,s,o,l,r)=>{let c=0;return o&&l?c+=100:(o||l)&&(c+=50),c+=Math.max(...n.map(m=>Math.max(t.includes(m)?m.length:0,s.includes(m)?m.length:0)),0),c+=10*(o+l-1),c+=5*r,!o&&!l&&r&&(c-=10),c},Ge=n=>Array.from(n.querySelectorAll(".ant-divider-inner-text")).map(t=>{var s;return((s=t.textContent)==null?void 0:s.trim())||""}).filter(Boolean),Ve=n=>Array.from(n.querySelectorAll(".flexible-links a")).map(t=>{var s;return((s=t.textContent)==null?void 0:s.trim())||""}).filter(Boolean),Ke=n=>{const t=Array.from(n.querySelectorAll("p")),s=[];for(const o of t){const l=o.cloneNode(!0);re(l),s.push(l.outerHTML)}return s.filter(Boolean).join("\n")},Xe=n=>n.some(t=>t.includes("ctrl")||t.includes("alt")||t.includes("shift")||t.includes("win")||t.includes("cmd")),Qe=(n,t)=>{var r;const s={},o=Array.from(n.querySelectorAll("table")),l=Xe(t);for(const c of o){const u=Array.from(c.querySelectorAll("th")).map(x=>{var h,E;return Ne((E=(h=x.textContent)==null?void 0:h.trim())!=null?E:"")}).filter(x=>!x.toLowerCase().includes("описание")).join("|"),f=Array.from(c.querySelectorAll("tr")).filter(x=>{let h=x.parentElement;for(;h;){if(h.tagName.toLowerCase()==="thead")return!1;h=h.parentElement}return!0}),C=Array.from(c.querySelectorAll("th")).map((x,h)=>{var E;return(E=x.textContent)!=null&&E.toLowerCase().includes("описание")?h:-1}).filter(x=>x!==-1),w=[];for(const x of f){const h=x.cloneNode(!0);if(Array.from(h.cells).forEach((y,b)=>{C.includes(b)&&y.remove()}),h.cells.length===0)continue;let E;if(l){const y=R(t.join(" ")),b=Array.from(h.cells).map(j=>{var A;const L=j.querySelectorAll("mark.key");return L.length>0?Array.from(L).map(k=>{var T;return((T=k.textContent)==null?void 0:T.toLowerCase())||""}).join(" "):((A=j.textContent)==null?void 0:A.toLowerCase())||""}).join(" ");E=R(b).includes(y)}else{const y=h.innerHTML.toLowerCase();E=t.every(b=>y.includes(b.toLowerCase()))}E&&w.push(h.outerHTML)}w.length>0&&((r=s[u])!=null||(s[u]=[]),s[u].push(...w))}return Object.entries(s).map(([c,m])=>{const u=c.split("|").filter(Boolean);let f="";if(u.length>0){const C=u.map(w=>"<th>".concat(w,"</th>")).join("");f="<thead><tr>".concat(C,"</tr></thead>")}return"<table>".concat(f).concat(m.join(""),"</table>")}).join("")},Ue=(n,t)=>{const s=Array.from(n.querySelectorAll("ul")),o=[];for(const l of s){const r=l.cloneNode(!0);re(r);const c=_(r.outerHTML),m=I(c);(t.length===0||t.some(f=>m.includes(I(f))))&&o.push(r.outerHTML)}return o.filter(Boolean).join("\n")},Ze=(n,t)=>{const s=n.split("\n");for(const o of s){const l=I(_(o));let r=!0;for(const c of t)if(!l.includes(c)){r=!1;break}if(r)return!0}return!1},Je=(n,t)=>{const s=Ze(n.content,t),o=I(n.title),l=I(n.tag||""),r=I(_(n.content||"")),{titleMatches:c,tagMatches:m,contentMatches:u}=Be(t,o,l,r),f=Ye(t,o,l,c.length,m.length,u.length);return J(Z({},n),{content:_e(n.content,t),isSingleParagraphMatch:s,hasTitleMatch:c.length>0,hasTagMatch:m.length>0,score:f})},We=(n,t)=>{const[s,o]=i.useState([]),[l,r]=i.useState(0),[c,m]=i.useState(n),[u,f]=i.useState(""),C=i.useMemo(()=>t?document.querySelectorAll("details"):null,[t]),w=i.useCallback(h=>{if(!C)return[];const E=[];return C.forEach(y=>{var v,S;const b=y.querySelector("summary");if(!b)return;const N=b.getAttribute("id");if(!N)return;const j=b.querySelector("h3"),L=j&&(v=j.textContent)!=null?v:"",A=(S=y.getAttribute("data-tags"))!=null?S:"",k=Ge(y),T=Ve(y),g=Ke(y),d=Qe(y,h),a=Ue(y,h),p=[g,d,a,...k,...T].join("\n");(L||p)&&E.push({title:L,content:p.trim(),id:N,tag:A.trim()})}),E},[C]),x=i.useCallback(we(h=>{if(!t||!h.trim()){o([]),f("");return}const E=h.split(/\s+/).filter(j=>j.length>0).map(I),N=w(E).filter(({title:j,content:L,tag:A})=>{const k=I(j),T=I(_(L||"")),g=I(A||"");if(h.toLowerCase().includes("ctrl")||h.toLowerCase().includes("alt")||h.toLowerCase().includes("shift")||h.toLowerCase().includes("win")||h.toLowerCase().includes("cmd")){const a=R(h),p=R(j),v=R(_(L||"")),S=R(A||"");return p.includes(a)||v.includes(a)||S.includes(a)}return E.every(a=>k.includes(a)||T.includes(a)||g.includes(a))}).map(j=>Je(j,E)).sort((j,L)=>L.score!==j.score?L.score-j.score:0);o(N),f(h)},300),[t,w]);return i.useEffect(()=>{const h=setTimeout(()=>m(n),100);return x(n),()=>{clearTimeout(h),x.cancel()}},[n,x]),i.useEffect(()=>{r(s.length>0?0:-1)},[s]),{results:s,selectedResultIndex:l,setSelectedResultIndex:r,debouncedQuery:c,resultsQuery:u}},ee=({onLinkClick:n,sections:t})=>e.jsx("div",{className:"search-category",children:t.map(s=>e.jsxs("button",{onClick:()=>n(s.id),children:[s.icon,s.title]},s.id))}),et=({query:n,onLinkClick:t,resultRefs:s,results:o,selectedResultIndex:l})=>{const r=(f,C)=>{if(!f||f.trim()==="")return[];const w=f.split(", "),x=C.toLowerCase().trim();return w.filter(h=>h.toLowerCase().includes(x))},c=typeof window!="undefined"&&window.innerWidth<=768,[m,u]=i.useState(null);return e.jsx(e.Fragment,{children:o.map(({title:f,content:C,id:w,tag:x},h)=>{const E=r(x,n),y=h===l,b=m===h;return e.jsx("div",{children:e.jsxs("button",{ref:N=>{s.current&&(s.current[h]=N)},className:"search-link ".concat(y?"search-selected":""),style:c?{opacity:1,filter:"none"}:y||b?{filter:"none"}:{filter:"saturate(0.25)"},tabIndex:0,onClick:N=>{N.preventDefault(),t(w)},onMouseEnter:()=>u(h),onMouseLeave:()=>u(null),children:[e.jsxs("div",{className:"search-header ".concat(y?"search-selected":""),children:[e.jsx("p",{className:"search-title",children:f.replace(/^[+-]+/,"").trim()}),E.length>0&&e.jsx("span",{className:"faq-tags",children:E.map(N=>e.jsx("mark",{children:N},N))})]}),e.jsx("div",{className:"search-content faq-content no-copy",dangerouslySetInnerHTML:{__html:C}})]})},w)})})},le=({query:n})=>{const t=()=>{const s=window.location.pathname;let o="";return s.includes("aefaq")?o="after effects":s.includes("prfaq")?o="premiere pro":s.includes("psfaq")?o="photoshop":s.includes("aeexpr")&&(o="after effects expression"),"".concat(n," ").concat(o)};return e.jsxs("div",{children:[e.jsxs("div",{className:"search-external-links",children:[e.jsx("button",{onClick:()=>{window.open("https://yandex.com/search/?text=".concat(encodeURIComponent(t())),"_blank")},children:"Найти в Яндексе"}),e.jsxs("button",{onClick:()=>{window.open("https://www.perplexity.ai/search?q=".concat(encodeURIComponent(t())),"_blank")},children:["Спросить у Perplexity",e.jsx("sup",{children:"1"})]})]}),e.jsxs("p",{className:"search-no-results-tip",children:[e.jsx("sup",{children:"1"})," Perplexity и другие чат-боты с использованием нейросетевых моделей могут выдавать недостоверную информацию"]})]})},tt=({query:n})=>e.jsxs("div",{children:[e.jsxs("div",{className:"search-no-results",children:[e.jsxs("p",{className:"search-no-results-title",children:["По вашему запросу на этой странице"," ",e.jsx("span",{style:{color:"var(--summary-text)",fontWeight:600},children:"ничего"})," ","не нашлось"]}),e.jsxs("p",{className:"search-no-results-message",children:["Попробуйте перефразировать свой запрос или выполните поиск в Яндексе или Perplexity",e.jsx("sup",{children:"1"})]})]}),e.jsx(le,{query:n})]}),ht=({sections:n})=>{const{isOpen:t,closeModal:s,isPageLoaded:o}=je(),[l,r]=i.useState(""),[c,m]=i.useState(!1),[u,f]=i.useState(!1),C=i.useRef([]),w=i.useRef(null),x=i.useRef(null),[h,E]=i.useState(!1),{results:y,selectedResultIndex:b,setSelectedResultIndex:N,debouncedQuery:j,resultsQuery:L}=We(l,o);i.useEffect(()=>{if(t){const g=setTimeout(()=>{var d,a;(d=w.current)==null||d.focus(),(a=w.current)==null||a.select()},0);return()=>clearTimeout(g)}},[t]),i.useEffect(()=>{const g=x.current;if(!g)return;const d=()=>{E(g.scrollHeight>g.clientHeight&&g.scrollTop+g.clientHeight<g.scrollHeight-1)};return d(),g.addEventListener("scroll",d),window.addEventListener("resize",d),()=>{g.removeEventListener("scroll",d),window.removeEventListener("resize",d)}},[y]),i.useEffect(()=>{if(o){const g=setTimeout(()=>{f(!0)},100);return()=>clearTimeout(g)}else f(!1)},[o,y]);const A=g=>{r(g),g.trim()===""?(m(!1),f(!1)):(m(!0),f(!1))},k=i.useCallback(g=>{var H,$;const d=document.getElementById(g);if(!d)return;const a=d.closest("details");a&&!a.hasAttribute("open")&&a.setAttribute("open","true");const p=($=(H=document.querySelector("header"))==null?void 0:H.offsetHeight)!=null?$:0,S=d.getBoundingClientRect().top+window.pageYOffset-p-14;window.scrollTo({top:S,behavior:"smooth"});const M=new CustomEvent("open-spoiler-by-id",{detail:{id:g}});window.dispatchEvent(M),s()},[s]);i.useEffect(()=>{const g=d=>{if(!(!t||y.length===0))switch(d.key){case"ArrowDown":d.preventDefault(),N(a=>a<y.length-1?a+1:a);break;case"ArrowUp":d.preventDefault(),N(a=>a>0?a-1:a);break;case"Enter":d.preventDefault(),b>=0&&b<y.length&&k(y[b].id);break}};if(t)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t,y,b,k]),i.useEffect(()=>{var g;if(b>=0){if(window.innerWidth<=768)return;const a=document.querySelector(".search-results"),p=a==null?void 0:a.querySelectorAll(".search-link");(g=p==null?void 0:p[b])==null||g.scrollIntoView({behavior:"smooth",block:"center"})}},[b]),i.useEffect(()=>{const g=x.current;if(!g)return;const d=a=>{if(a.target instanceof HTMLElement&&a.target.tagName==="MARK"){a.stopPropagation();const p=a.target.closest(".search-link");p&&p.click()}};return g.addEventListener("click",d,!0),()=>{g.removeEventListener("click",d,!0)}},[]);const T=()=>c?y.length>0?e.jsxs(e.Fragment,{children:[e.jsx(et,{query:L,resultRefs:C,results:y,selectedResultIndex:b,onLinkClick:k}),e.jsx(le,{query:j})]}):l.trim()!==""&&y.length===0&&u?e.jsx(tt,{query:l}):e.jsx(ee,{sections:n,onLinkClick:k}):e.jsx(ee,{sections:n,onLinkClick:k});return e.jsx(O,{closeIcon:null,footer:null,forceRender:!0,open:t,width:850,onCancel:s,children:e.jsx("div",{className:"search",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("input",{ref:w,className:"search-input",placeholder:"Введите что-нибудь для поиска...",style:{cursor:"text"},type:"search",value:l,onChange:g=>A(g.target.value)}),e.jsxs("p",{className:"search-counter",children:[e.jsx("span",{style:{color:"var(--summary-text)",fontWeight:500,fontSize:"1.05em"},children:y.length})," ",ke(y.length)]}),l.trim()!==""&&e.jsx("button",{className:"search-input-clear",style:{cursor:"pointer"},onClick:()=>{r(""),m(!1)},children:e.jsx(ve,{fontSize:"small"})}),e.jsx("button",{className:"search-input-close",onClick:s,children:e.jsx(P,{})})]}),e.jsxs("div",{ref:x,className:"search-results".concat(h?" show-fade":""),children:[T(),h]})]})})})},nt=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(null),l=i.useCallback(u=>{const C=u.target.closest("a[href]");if(C){const w=C.getAttribute("href");w&&/^https?:\/\//.test(w)&&(u.preventDefault(),o(w),t(!0))}},[]),r=i.useCallback(()=>{s&&window.open(s,"_blank","noreferrer"),t(!1),o(null)},[s]),c=i.useCallback(()=>{t(!1),o(null)},[]);return i.useEffect(()=>{const u=f=>{f.key==="Enter"&&r()};return n&&document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[n,r]),{handleLinkClick:l,ExternalLinkModal:e.jsx(O,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:c,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:s}),e.jsx("button",{className:"modal-header-close",onClick:c,children:e.jsx(P,{})})]}),e.jsx("p",{children:"Вы уверены, что хотите перейти по внешней ссылке?"}),e.jsx("div",{className:"flexible-links",children:e.jsx("button",{onClick:r,children:"Перейти"})})]})})})}},st=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(null),l=i.useCallback(u=>{const C=u.target.closest('a[href^="#"]');if(C&&C.getAttribute("href").length>1){const x=C.getAttribute("href").substring(1),h=document.getElementById(x);if(h){const E=u.currentTarget.closest("details"),y=h.closest("details");if(y&&E!==y){u.preventDefault();const b=y.querySelector(".faq-summary"),N=b==null?void 0:b.querySelector("h3");let j=N?N.textContent:"без названия";j=j.replace(/^\d+\.\d+\.\s*/,""),o({id:x,title:j}),t(!0)}}}},[]),r=i.useCallback(()=>{if(s){const u=document.getElementById(s.id);u&&u.closest("details")&&window.dispatchEvent(new CustomEvent("open-spoiler-by-id",{detail:{id:s.id}}))}t(!1),o(null)},[s]),c=i.useCallback(()=>{t(!1),o(null)},[]);i.useEffect(()=>{const u=f=>{f.key==="Enter"&&r()};return n&&document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[n,r]);const m=e.jsx(O,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:c,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Переход на другую статью"}),e.jsx("button",{className:"modal-header-close",onClick:c,children:e.jsx(P,{})})]}),e.jsxs("p",{children:["Вы уверены, что хотите перейти к статье ",e.jsxs("mark",{children:["«",s==null?void 0:s.title,"»"]})," ","на этой странице?"]}),e.jsx("div",{className:"flexible-links",children:e.jsx("button",{onClick:r,children:"Перейти"})})]})})});return{handleLinkClick:l,InternalLinkModal:m}},ce=i.createContext(!1),ot=()=>i.useContext(ce),G=4,rt=({tags:n})=>{const[t,s]=i.useState(!1),o=i.useMemo(()=>n.split(", ").filter(Boolean),[n]),l=o.length>G,[r,c]=i.useState([]);if(i.useEffect(()=>{if(l){const w=[...o].sort(()=>.5-Math.random());c(w.slice(0,G))}},[o,l]),o.length===0)return null;const m=t?o:l?r:o,u=o.length-G,f=w=>{w.preventDefault(),w.stopPropagation(),s(x=>!x)},C=w=>{const x=w%10,h=w%100;return h>=11&&h<=19?"тегов":x===1?"тег":[2,3,4].includes(x)?"тега":"тегов"};return e.jsxs("span",{className:"faq-tags",children:[m.map(w=>e.jsx("mark",{children:w},w)),l&&e.jsx("mark",{className:"faq-tags-toggle",onClick:f,children:t?"скрыть":"и ещё ".concat(u," ").concat(C(u))})]})},q={SCROLL_DELAY:150,MOUSE_ENTER_DELAY:1e3,PADDING:{MIN:10,MAX:14,SCREEN:{MIN:320,MAX:768}}},te=()=>{var s,o;if(typeof window=="undefined")return{headerHeight:0,padding:0};const n=(o=(s=document.querySelector("header"))==null?void 0:s.offsetHeight)!=null?o:0,t=Math.min(q.PADDING.MIN+(q.PADDING.MAX-q.PADDING.MIN)*((window.innerWidth-q.PADDING.SCREEN.MIN)/(q.PADDING.SCREEN.MAX-q.PADDING.SCREEN.MIN)),q.PADDING.MAX);return{headerHeight:n,padding:t}},lt=(n,t)=>{let s;return o=>{clearTimeout(s),s=setTimeout(()=>n(o),t)}},ft=()=>{const n=Array.from(document.querySelectorAll(".faq-content"));let t="";if(n.forEach((s,o)=>{Array.from(s.querySelectorAll(".faq-summary")).forEach((r,c)=>{t="".concat(o+1,".").concat(c+1),r.hasAttribute("id")||r.setAttribute("id",t)})}),typeof window!="undefined"&&window.location.hash){const s=window.location.hash.slice(1);!document.getElementById(s)&&/^\d+\.\d+$/.test(s)&&(F.error("Не удалось найти статью по ссылке, возможно он был перемещён или удалён"),history.replaceState(null,"",window.location.pathname+window.location.search))}return t},pt=({title:n,children:t,tag:s})=>{var k,T,g;const{handleLinkClick:o,InternalLinkModal:l}=st(),{handleLinkClick:r,ExternalLinkModal:c}=nt(),m=d=>{o(d),r(d)},[u,f]=i.useState(!1),[C,w]=i.useState(""),x=i.useRef(null),h=i.useRef(null),E=i.useCallback(lt(d=>{typeof window!="undefined"&&history.replaceState(null,"",window.location.pathname+window.location.search+d)},50),[]),y=i.useCallback(()=>{if(typeof window=="undefined")return;const d=document.querySelectorAll("details[open]");if(d.length>0?document.body.classList.add("body-has-any-spoiler-open"):document.body.classList.remove("body-has-any-spoiler-open"),d.length>0){const a=window.innerHeight;Array.from(d).some(v=>{const S=v.getBoundingClientRect();return!(S.bottom<a*.15||S.top>a*.9)})?document.body.classList.add("has-open-details"):document.body.classList.remove("has-open-details")}else document.body.classList.remove("has-open-details")},[]);i.useEffect(()=>{var M;if(typeof window=="undefined")return;const d=x.current;if(!d)return;const a=d.querySelector(".details-content-wrapper");if(!a)return;const p=a.querySelector(".details-content-inner");if(!p)return;const v=new ResizeObserver(()=>{d.open&&(a.style.maxHeight="".concat(p.scrollHeight,"px"))}),S=H=>{if(H.target===a)if(document.body.style.overflow="",u){a.style.maxHeight="".concat(p.scrollHeight,"px"),v.observe(p);const $=d.offsetHeight;d.style.marginBottom="".concat($*.01+10,"px")}else d.open=!1,y()};if(a.addEventListener("transitionend",S),u){document.body.style.overflow="hidden",d.open=!0;const H=p.scrollHeight,$=window.innerHeight;H>$?a.style.maxHeight="".concat($,"px"):a.style.maxHeight="".concat(H,"px"),y(),setTimeout(()=>{y()},100);const K=(M=d.querySelector(".faq-summary"))==null?void 0:M.id;K&&(E("#".concat(K)),setTimeout(()=>{const X=d.querySelector(".faq-summary");if(X){const{headerHeight:ae,padding:ie}=te(),de=X.getBoundingClientRect().top+window.pageYOffset-ae-ie;window.scrollTo({top:de,behavior:"smooth"})}},150))}else d.open&&(document.body.style.overflow="hidden",v.unobserve(p),window.location.hash&&E(""),a.style.maxHeight="0px",d.style.marginBottom="");return()=>{v.disconnect(),a.removeEventListener("transitionend",S),document.body.style.overflow=""}},[u,E,y]);const b=d=>{if(typeof window=="undefined")return;const{headerHeight:a,padding:p}=te();setTimeout(()=>{const v=d.getBoundingClientRect().top+window.pageYOffset-a-p;window.scrollTo({top:v,behavior:"smooth"})},q.SCROLL_DELAY)};i.useEffect(()=>{if(x.current){const d=x.current.querySelector(".faq-summary");if(d){const a=d.id;if(a)w(a);else{const p=setInterval(()=>{const v=d.id;v&&(w(v),clearInterval(p))},100);return()=>clearInterval(p)}}}},[]),i.useEffect(()=>{if(typeof window=="undefined")return;const d=window.location.hash.slice(1);C&&d===C&&f(!0)},[C]),i.useEffect(()=>{if(typeof window=="undefined")return;const d=a=>{var M;const p=a,{id:v}=p.detail,S=(M=x.current)==null?void 0:M.querySelector(".faq-summary");S&&S.id===v&&f(!0)};return window.addEventListener("open-spoiler-by-id",d),()=>{window.removeEventListener("open-spoiler-by-id",d)}},[]),i.useEffect(()=>{var p;if(typeof window=="undefined")return;const d=window.location.hash.slice(1),a=(p=x.current)==null?void 0:p.querySelector(".faq-summary");d&&a&&a.id===d&&u&&b(a)},[u]),i.useEffect(()=>{if(typeof window=="undefined"||!h.current)return;let d;const a=()=>{d=setTimeout(()=>{var S,M;const v=(M=(S=x.current)==null?void 0:S.querySelector(".faq-summary"))==null?void 0:M.id;v&&history.replaceState(null,"","".concat(window.location.pathname).concat(window.location.search,"#").concat(v))},q.MOUSE_ENTER_DELAY)},p=()=>{clearTimeout(d)};return h.current.addEventListener("mouseenter",a),h.current.addEventListener("mouseleave",p),()=>{var v,S;(v=h.current)==null||v.removeEventListener("mouseenter",a),(S=h.current)==null||S.removeEventListener("mouseleave",p),clearTimeout(d)}},[]),i.useEffect(()=>{typeof window!="undefined"&&(window.detailsSummaryScrollListenerAttached||(window.addEventListener("scroll",y,{passive:!0}),window.detailsSummaryScrollListenerAttached=!0))},[y]);const N=d=>{d.preventDefault();const a=x.current;a&&(a.open?f(!1):f(!0))},j=d=>{var p,v,S;d.preventDefault(),d.stopPropagation();const a=(S=(v=(p=x.current)==null?void 0:p.querySelector(".faq-summary"))==null?void 0:v.id)!=null?S:"";if(!a){F.warning("Прежде чем копировать ссылку - дождитесь полной загрузки страницы");return}if(typeof window!="undefined"){const M="".concat(window.location.origin).concat(window.location.pathname,"#").concat(a);navigator.clipboard.writeText(M),F.success("Ссылка на статью ".concat(a," скопирована в буфер обмена"))}},L=(g=(T=(k=x.current)==null?void 0:k.querySelector(".faq-summary"))==null?void 0:T.id)!=null?g:"",A=(C?"".concat(C,". "):"")+n;return e.jsxs("details",{ref:x,className:u?"is-open":"","data-tags":s,children:[e.jsxs("summary",{className:"faq-summary",onClick:N,children:[e.jsxs("div",{className:"faq-summary-left",children:[e.jsx("span",{className:"faq-summary-icon",children:"+"}),e.jsxs("div",{className:"faq-summary-text-content",children:[e.jsx("h3",{children:A}),s&&e.jsx(rt,{tags:s})]})]}),e.jsx(xe,{title:"Скопировать ссылку в буфер обмена",children:e.jsx("button",{className:"copy-button ".concat(L?"":"disabled"),onClick:j,children:e.jsx(se,{})})})]}),e.jsx("div",{className:"details-content-wrapper",children:e.jsx("div",{className:"details-content-inner",children:e.jsx(ce.Provider,{value:u,children:e.jsx("section",{ref:h,className:"faq-section",onClick:m,children:t})})})}),l,c]})},D={SCROLL_DELAY:300,PADDING:{MIN:10,MAX:14,SCREEN:{MIN:320,MAX:768}}},ct=()=>{var s,o;const n=(o=(s=document.querySelector("header"))==null?void 0:s.offsetHeight)!=null?o:0,t=Math.min(D.PADDING.MIN+(D.PADDING.MAX-D.PADDING.MIN)*((window.innerWidth-D.PADDING.SCREEN.MIN)/(D.PADDING.SCREEN.MAX-D.PADDING.SCREEN.MIN)),D.PADDING.MAX);return{headerHeight:n,padding:t}},at=(n,t)=>{let s;return o=>{clearTimeout(s),s=setTimeout(()=>n(o),t)}},xt=(n=!0)=>{const{hash:t}=ye(),s=i.useCallback(at(o=>{history.replaceState(null,"",window.location.pathname+window.location.search+o)},50),[]);i.useEffect(()=>{t&&n&&setTimeout(()=>{const o=document.querySelector(t);if(o){const{headerHeight:l,padding:r}=ct(),c=o.getBoundingClientRect().top+window.pageYOffset-l-r;window.scrollTo({top:c,behavior:"smooth"}),setTimeout(()=>{history.replaceState(null,"",window.location.pathname+window.location.search)},5e3)}else console.warn("Элемент с якорем ".concat(t," не найден")),history.replaceState(null,"",window.location.pathname+window.location.search)},D.SCROLL_DELAY)},[t,n,s])},yt=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(!1),[l,r]=i.useState(!1),c=()=>t(!0),m=()=>t(!1),u=()=>o(!1),f=()=>r(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{type:"info",children:e.jsxs("ul",{children:[e.jsx("li",{children:"Содержание этой страницы периодически обновляется и предоставляется «как есть». Информация в статьях может быть неполной, устаревшей или неточной. Мнение автора и читателя может не совпадать."}),e.jsxs("li",{children:["Если вы хотите сделать ресурс ещё лучше — поделитесь своими замечаниями и идеями через бота ",e.jsx("a",{href:"https://t.me/aechatru_bot",children:"@aechatru_bot"}),"."]})]})}),e.jsx("div",{className:"support",children:e.jsxs("button",{className:"modal-page-button support-button-enhanced",onClick:c,children:[e.jsx(Ee,{}),"Поддержать проект"]})}),e.jsx(O,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:m,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать проект"}),e.jsx("button",{className:"modal-header-close",onClick:m,children:e.jsx(P,{})})]}),e.jsx("p",{children:"Если вам понравился этот сайт и вы хотели бы, чтобы я продолжил развивать его, то вы можете поддержать меня любой суммой и любым удобным вам способом."}),e.jsxs("div",{className:"flexible-links",children:[e.jsx("button",{className:"support-button-sber",onClick:()=>o(!0),children:"Сбербанк"}),e.jsx(O,{centered:!0,className:"support-modal",closeIcon:null,footer:null,open:s,onCancel:u,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать на Сбербанк"}),e.jsx("button",{className:"modal-header-close",onClick:u,children:e.jsx(P,{})})]}),e.jsx("p",{children:"Вы можете перевести из любого банка по номеру банковской карты любую сумму."}),e.jsx(W.mark,{className:"copy-cardnumber-sber",children:"2202202357342488"}),e.jsxs("p",{className:"support-card-recipient-info",children:["Нажмите на номер карты, чтобы скопировать его в буфер обмена",e.jsx("br",{}),"Получатель: ",e.jsx("mark",{children:"Михаил Денисович Ф."})]})]})})}),e.jsx("button",{className:"support-button-yoomoney",onClick:()=>r(!0),children:"ЮMoney"}),e.jsx(O,{centered:!0,className:"support-modal",closeIcon:null,footer:null,open:l,onCancel:f,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать на ЮMoney"}),e.jsx("button",{className:"modal-header-close",onClick:f,children:e.jsx(P,{})})]}),e.jsx("p",{children:"Для пополнения кошелька вам нужно проделать несколько действий:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Зайдите в приложение своего банка."}),e.jsxs("li",{children:["Откройте раздел ",e.jsx("mark",{className:"select",children:"«Платежи»"})," и найдите в нём категорию"," ",e.jsx("mark",{className:"select",children:"«Электронные кошельки»"})," или"," ",e.jsx("mark",{className:"select",children:"«Финансы»"}),". Обычно в этих разделах можно найти ",e.jsx("mark",{children:"ЮMoney"}),". Также вы можете воспользоваться поиском вашего банка."]}),e.jsxs("li",{children:["Нажмите на номер кошелька снизу, он скопируется в буфер обмена. Вставьте этот номер в поле"," ",e.jsx("mark",{className:"select",children:"«Номер кошелька»"})," приложения вашего банка и введите любую сумму. После этого - подтвердите перевод.",e.jsx(W.mark,{className:"copy-cardnumber-yoomoney",children:"410016763684808"}),e.jsxs("p",{className:"support-card-recipient-info",children:["Нажмите, чтобы скопировать или пополните баланс автору с помощью"," ",e.jsx("a",{className:"support-yoomoney-link",href:"https://yoomoney.ru/to/410016763684808",children:"этой ссылки"}),"."]})]})]})]})})})]})]})})})]})},gt=({type:n,caption:t,variant:s,theme:o,src:l,imgTitle:r})=>{const c=ot(),[m,u]=i.useState(c);i.useEffect(()=>{if(c)u(!0);else{const p=setTimeout(()=>{u(!1)},350);return()=>clearTimeout(p)}},[c]);const[f,C]=i.useState(!1),[w,x]=i.useState(!1),[h,E]=i.useState(0),y=n==="youtube"?"figure-browser-youtube":"figure-".concat(s||"windows","-").concat(o||"light"),b=s==="windows",N=i.useCallback(()=>{E(window.scrollY),C(!0),x(!1)},[]),j=i.useCallback(()=>{x(!0),setTimeout(()=>{C(!1),x(!1)},250)},[]),L=i.useCallback(()=>{f?j():N()},[f,j,N]),A=i.useCallback(p=>{p.target===p.currentTarget&&j()},[j]);if(i.useEffect(()=>{const p=v=>{v.key==="Escape"&&f&&j()};return f&&document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[f,j]),i.useEffect(()=>{const p=()=>{Math.abs(window.scrollY-h)>window.innerHeight*.25&&j()};return f&&window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[f,j,h]),!m)return null;const k=({label:p,className:v,onClick:S,svgPath:M})=>e.jsx("button",{"aria-label":p,className:v,onClick:S,children:M&&e.jsx("svg",{height:"32",viewBox:"0 0 24 24",width:"32",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:M,fill:"currentColor"})})});let T,g;const d=e.jsxs(e.Fragment,{children:[b&&e.jsx("figcaption",{children:t}),e.jsx("div",{className:"window-controls",children:b?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"minimize",label:"Свернуть",svgPath:"M5 20q-.425 0-.713-.288T4 19q0-.425.288-.713T5 18h14q.425 0 .713.288T20 19q0 .425-.288.713T19 20H5Z",onClick:j}),e.jsx(k,{className:"maximize",label:"Раскрыть",svgPath:"M6 20q-.825 0-1.413-.588T4 18V6q0-.825.588-1.413T6 4h12q.825 0 1.413.588T20 6v12q0 .825-.588 1.413T18 20H6Zm0-2h12V6H6v12ZM6 6v12V6Z",onClick:N}),e.jsx(k,{className:"close",label:"Закрыть",svgPath:"m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z",onClick:j})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"close",label:"Закрыть",onClick:j}),e.jsx(k,{className:"maximize",label:"Раскрыть",onClick:N}),e.jsx(k,{className:"minimize",label:"Свернуть",onClick:j})]})}),!b&&e.jsx("figcaption",{children:t})]}),a=({children:p})=>e.jsxs("div",{children:[e.jsx("div",{className:"window-header",onDoubleClick:L,children:d}),p]});switch(n){case"image":T=e.jsx(a,{children:e.jsx("img",{alt:r,src:l,onClick:L})});break;case"video":T=e.jsx(a,{children:e.jsx("video",{controls:!0,src:l})});break;case"youtube":g=l==null?void 0:l.split("/").pop(),T=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"window-header",children:[e.jsxs("figcaption",{children:[e.jsx("b",{children:"YouTube"}),": ",t]}),e.jsxs("div",{className:"youtube-button",children:[e.jsx("button",{onClick:()=>window.open("https://www.youtube.com/watch?v=".concat(g),"_blank"),children:"Открыть в новой вкладке"}),e.jsx("button",{"aria-label":"Копировать ссылку",onClick:async()=>{await be("https://www.youtube.com/watch?v=".concat(g))?F.success("Ссылка на видео скопирована"):F.error("Не удалось скопировать ссылку")},children:e.jsx(se,{})})]})]}),e.jsx("iframe",{allowFullScreen:!0,src:"https://www.youtube.com/embed/".concat(g),title:t})]});break;default:T=e.jsx(e.Fragment,{})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"figure-container",children:e.jsx("figure",{className:y,children:T})}),f&&ge.createPortal(e.jsx("div",{className:"fullscreen-overlay ".concat(w?"closing":""),onClick:A,children:e.jsx("div",{className:"fullscreen-content ".concat(y," ").concat(w?"closing":""),children:T})}),document.body)]})};export{gt as C,pt as D,yt as S,ht as a,ft as g,xt as u};
