var ye=Object.defineProperty,ge=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var oe=(n,t,s)=>t in n?ye(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,re=(n,t)=>{for(var s in t||(t={}))je.call(t,s)&&oe(n,s,t[s]);if(se)for(var s of se(t))Ce.call(t,s)&&oe(n,s,t[s]);return n},le=(n,t)=>ge(n,we(t));import{c as ie,j as e,r as i,M as P,C as z,ah as be,T as ve,R as ce,u as Ee,m as Se,ad as Ne}from"./index-Beb_KOBx.js";import{d as ke,u as Le,s as Y,A as Te}from"./Header-BHZewB63.js";import{S as de,c as Ae}from"./PageIntro-CxdZBceg.js";const Me=ie(e.jsx("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H7.07L2.4 12l4.66-7H22zm-11.59-2L14 13.41 17.59 17 19 15.59 15.41 12 19 8.41 17.59 7 14 10.59 10.41 7 9 8.41 12.59 12 9 15.59z"})),Ie=ie(e.jsx("path",{d:"M18.5 3H6c-1.1 0-2 .9-2 2v5.71c0 3.83 2.95 7.18 6.78 7.29 3.96.12 7.22-3.06 7.22-7v-1h.5c1.93 0 3.5-1.57 3.5-3.5S20.43 3 18.5 3M16 5v3H6V5zm2.5 3H18V5h.5c.83 0 1.5.67 1.5 1.5S19.33 8 18.5 8M5 19h14c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1"})),qe=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),De=n=>{const t=document.createElement("textarea");return t.innerHTML=n,t.value},Re=n=>n%10===1&&n%100!==11?"результат":n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?"результата":"результатов",He=["ctrl","alt","shift","win","cmd"],$e={control:"ctrl",windows:"win",command:"cmd"},G=n=>{const t=document.createElement("div");return t.innerHTML=n,t.textContent||t.innerText||""},Oe=/[^a-zа-яё0-9+\-=()]/gi,Pe=/ё/gi,D=n=>n.toLowerCase().replace(Pe,"е").replace(Oe," ").replace(/\s+/g," ").trim(),ze=n=>He.some(t=>n.toLowerCase().includes(t)),O=n=>{let t=n.toLowerCase();return Object.entries($e).forEach(([s,o])=>{t=t.replace(new RegExp(s,"g"),o)}),t.replace(/\s*\+\s*/g," ").replace(/\s+/g," ").trim()},Fe=n=>{var s;const t=n.querySelectorAll("mark.key");return t.length>0?Array.from(t).map(o=>{var c;return((c=o.textContent)==null?void 0:c.toLowerCase())||""}).join(" "):((s=n.textContent)==null?void 0:s.toLowerCase())||""},U=new Map,F=(n,t,s)=>{if(s){const l=O(n),a=O(t.join(" "));return l.includes(a)}const o=t.join("|");if(!U.has(o)){const l=t.map(a=>"(?=.*".concat(qe(D(a)),")")).join("");U.set(o,new RegExp("^".concat(l,".*$")))}return U.get(o).test(D(n))},Be=(n,t,s)=>{const o=n.textContent||"";return F(o,t,s)?o:""},_e=n=>{const t=n.tagName;return t==="LI"||t==="P"},X=n=>{const t=n.cloneNode(!0);return t.querySelectorAll(".figure-container").forEach(s=>s.remove()),t},Ye=(n,t,s)=>{const o=n.querySelector("ul");if(!o)return{result:X(n).outerHTML,matchCount:1};const l=Array.from(o.querySelectorAll("li")).filter(d=>F(d.textContent||"",t,s)),a=X(n);if(l.length===0)return{result:a.outerHTML,matchCount:1};const u=document.createElement("ul");l.forEach(d=>{const S=X(d);u.appendChild(S)});const m=a.querySelector("ul");return m&&m.replaceWith(u),{result:a.outerHTML,matchCount:l.length+1}},Ge=(n,t,s)=>{let o="",c=0;return Array.from(n.childNodes).forEach(l=>{if(l.nodeType===Node.TEXT_NODE){const a=Be(l,t,s);a&&(o+=a,c+=1);return}if(l.nodeType===Node.ELEMENT_NODE){const a=l;if(a.classList.contains("figure-container"))return;const u=W(a,t,s);u.result&&(o+=u.result,c+=u.matchCount)}}),{result:o,matchCount:c}},W=(n,t,s)=>{if(_e(n)){const o=n.innerText||"";return F(o,t,s)?n.tagName==="LI"?Ye(n,t,s):{result:X(n).outerHTML,matchCount:1}:{result:"",matchCount:0}}return Ge(n,t,s)},Ve=(n,t,s)=>{const c=Array.from(n.querySelectorAll("tr")).filter(l=>Array.from(l.querySelectorAll("td")).some(u=>{const m=Fe(u);return F(m,t,s)}));if(c.length>0){const l=document.createElement("table"),a=n.querySelector("thead");a&&l.appendChild(a.cloneNode(!0));const u=document.createElement("tbody");return c.forEach(m=>u.appendChild(m.cloneNode(!0))),l.appendChild(u),l.outerHTML}return null},ue=n=>{const t=n.querySelector("details > p, details > div > p");if(t){const o=t.cloneNode(!0);return o.querySelectorAll(".figure-container").forEach(c=>c.remove()),o.outerHTML}const s=n.firstElementChild;if(s){const o=s.cloneNode(!0);return o.querySelectorAll(".figure-container").forEach(c=>c.remove()),o.outerHTML}return""},Ke=n=>Array.from(n).some(t=>Array.from(t.querySelectorAll("th")).some(o=>{var l;const c=((l=o.textContent)==null?void 0:l.toLowerCase())||"";return c.includes("комбинация")||c.includes("действие")})),Xe=(n,t,s)=>{let o={result:"",matchCount:0};return n.querySelectorAll("ul > li").forEach(l=>{const a=W(l,t,s);a.matchCount>o.matchCount&&(o=a)}),o.result||n.querySelectorAll("p").forEach(a=>{const u=W(a,t,s);u.matchCount>o.matchCount&&(o=u)}),o},Qe=(n,t,s)=>{const o=n.querySelectorAll("table");if(o.length>0){if(Ke(o))for(const c of Array.from(o)){const l=Ve(c,t,s);if(l)return l}return o[0].outerHTML}return ue(n)},Ue=(n,t)=>{var u,m;const s=document.createElement("div");s.innerHTML=n,s.querySelectorAll(".ant-divider, .ant-divider-inner-text").forEach(d=>d.remove());const o=ze(t.join(" ")),c=(u=s.querySelector("[data-tags]"))==null?void 0:u.getAttribute("data-tags"),l=(m=s.querySelector("summary h3"))==null?void 0:m.textContent;if(c&&F(c,t,o)||l&&F(l,t,o))return ue(s);const a=Xe(s,t,o);return a.result?a.result:Qe(s,t,o)},me=n=>{n.querySelectorAll(".figure-container").forEach(t=>t.remove())},Ze=(n,t,s,o)=>{const c=n.filter(u=>t.includes(u)),l=n.filter(u=>s.includes(u)),a=n.filter(u=>o.includes(u));return{titleMatches:c,tagMatches:l,contentMatches:a}},Je=(n,t,s,o,c,l)=>{let a=0;return o&&c?a+=100:(o||c)&&(a+=50),a+=Math.max(...n.map(u=>Math.max(t.includes(u)?u.length:0,s.includes(u)?u.length:0)),0),a+=10*(o+c-1),a+=5*l,!o&&!c&&l&&(a-=10),a},We=n=>Array.from(n.querySelectorAll(".ant-divider-inner-text")).map(t=>{var s;return((s=t.textContent)==null?void 0:s.trim())||""}).filter(Boolean),et=n=>Array.from(n.querySelectorAll(".flexible-links a")).map(t=>{var s;return((s=t.textContent)==null?void 0:s.trim())||""}).filter(Boolean),tt=n=>{const t=Array.from(n.querySelectorAll("p")),s=[];for(const o of t){const c=o.cloneNode(!0);me(c),s.push(c.outerHTML)}return s.filter(Boolean).join("\n")},nt=n=>n.some(t=>t.includes("ctrl")||t.includes("alt")||t.includes("shift")||t.includes("win")||t.includes("cmd")),st=(n,t)=>{var l;const s={},o=Array.from(n.querySelectorAll("table")),c=nt(t);for(const a of o){const m=Array.from(a.querySelectorAll("th")).map(y=>{var h,j;return De((j=(h=y.textContent)==null?void 0:h.trim())!=null?j:"")}).filter(y=>!y.toLowerCase().includes("описание")).join("|"),d=Array.from(a.querySelectorAll("tr")).filter(y=>{let h=y.parentElement;for(;h;){if(h.tagName.toLowerCase()==="thead")return!1;h=h.parentElement}return!0}),S=Array.from(a.querySelectorAll("th")).map((y,h)=>{var j;return(j=y.textContent)!=null&&j.toLowerCase().includes("описание")?h:-1}).filter(y=>y!==-1),g=[];for(const y of d){const h=y.cloneNode(!0);if(Array.from(h.cells).forEach((p,b)=>{S.includes(b)&&p.remove()}),h.cells.length===0)continue;let j;if(c){const p=O(t.join(" ")),b=Array.from(h.cells).map(C=>{var q;const A=C.querySelectorAll("mark.key");return A.length>0?Array.from(A).map(L=>{var M;return((M=L.textContent)==null?void 0:M.toLowerCase())||""}).join(" "):((q=C.textContent)==null?void 0:q.toLowerCase())||""}).join(" ");j=O(b).includes(p)}else{const p=h.innerHTML.toLowerCase();j=t.every(b=>p.includes(b.toLowerCase()))}j&&g.push(h.outerHTML)}g.length>0&&((l=s[m])!=null||(s[m]=[]),s[m].push(...g))}return Object.entries(s).map(([a,u])=>{const m=a.split("|").filter(Boolean);let d="";if(m.length>0){const S=m.map(g=>"<th>".concat(g,"</th>")).join("");d="<thead><tr>".concat(S,"</tr></thead>")}return"<table>".concat(d).concat(u.join(""),"</table>")}).join("")},ot=(n,t)=>{const s=Array.from(n.querySelectorAll("ul")),o=[];for(const c of s){const l=c.cloneNode(!0);me(l);const a=G(l.outerHTML),u=D(a);(t.length===0||t.some(d=>u.includes(D(d))))&&o.push(l.outerHTML)}return o.filter(Boolean).join("\n")},rt=(n,t)=>{const s=n.split("\n");for(const o of s){const c=D(G(o));let l=!0;for(const a of t)if(!c.includes(a)){l=!1;break}if(l)return!0}return!1},lt=(n,t)=>{const s=rt(n.content,t),o=D(n.title),c=D(n.tag||""),l=D(G(n.content||"")),{titleMatches:a,tagMatches:u,contentMatches:m}=Ze(t,o,c,l),d=Je(t,o,c,a.length,u.length,m.length);return le(re({},n),{content:Ue(n.content,t),isSingleParagraphMatch:s,hasTitleMatch:a.length>0,hasTagMatch:u.length>0,score:d})},ct=(n,t)=>{const[s,o]=i.useState([]),[c,l]=i.useState(0),[a,u]=i.useState(n),[m,d]=i.useState(""),S=i.useMemo(()=>t?document.querySelectorAll("details"):null,[t]),g=i.useCallback(h=>{if(!S)return[];const j=[];return S.forEach(p=>{var f,v;const b=p.querySelector("summary");if(!b)return;const E=b.getAttribute("id");if(!E)return;const C=b.querySelector("h3"),A=C&&(f=C.textContent)!=null?f:"",q=(v=p.getAttribute("data-tags"))!=null?v:"",L=We(p),M=et(p),x=tt(p),N=st(p,h),w=ot(p,h),r=[x,N,w,...L,...M].join("\n");(A||r)&&j.push({title:A,content:r.trim(),id:E,tag:q.trim()})}),j},[S]),y=i.useCallback(ke(h=>{if(!t||!h.trim()){o([]),d("");return}const j=h.split(/\s+/).filter(C=>C.length>0).map(D),E=g(j).filter(({title:C,content:A,tag:q})=>{const L=D(C),M=D(G(A||"")),x=D(q||"");if(h.toLowerCase().includes("ctrl")||h.toLowerCase().includes("alt")||h.toLowerCase().includes("shift")||h.toLowerCase().includes("win")||h.toLowerCase().includes("cmd")){const w=O(h),r=O(C),f=O(G(A||"")),v=O(q||"");return r.includes(w)||f.includes(w)||v.includes(w)}return j.every(w=>L.includes(w)||M.includes(w)||x.includes(w))}).map(C=>lt(C,j)).sort((C,A)=>A.score!==C.score?A.score-C.score:0);o(E),d(h)},300),[t,g]);return i.useEffect(()=>{const h=setTimeout(()=>u(n),100);return y(n),()=>{clearTimeout(h),y.cancel()}},[n,y]),i.useEffect(()=>{l(s.length>0?0:-1)},[s]),{results:s,selectedResultIndex:c,setSelectedResultIndex:l,debouncedQuery:a,resultsQuery:m}},ae=({onLinkClick:n,sections:t})=>e.jsx("div",{className:"search-category",children:t.map(s=>e.jsxs("button",{onClick:()=>n(s.id),children:[s.icon,s.title]},s.id))}),at=({query:n,onLinkClick:t,resultRefs:s,results:o,selectedResultIndex:c})=>{const l=(d,S)=>{if(!d||d.trim()==="")return[];const g=d.split(", "),y=S.toLowerCase().trim();return g.filter(h=>h.toLowerCase().includes(y))},a=typeof window!="undefined"&&window.innerWidth<=768,[u,m]=i.useState(null);return e.jsx(e.Fragment,{children:o.map(({title:d,content:S,id:g,tag:y},h)=>{const j=l(y,n),p=h===c,b=u===h;return e.jsx("div",{children:e.jsxs("button",{ref:E=>{s.current&&(s.current[h]=E)},className:"search-link ".concat(p?"search-selected":""),style:a?{opacity:1,filter:"none"}:p||b?{filter:"none"}:{filter:"saturate(0.25)"},tabIndex:0,onClick:E=>{E.preventDefault(),t(g)},onMouseEnter:()=>m(h),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:"search-header ".concat(p?"search-selected":""),children:[e.jsx("p",{className:"search-title",children:d.replace(/^[+-]+/,"").trim()}),j.length>0&&e.jsx("span",{className:"faq-tags",children:j.map(E=>e.jsx("mark",{children:E},E))})]}),e.jsx("div",{className:"search-content faq-content no-copy",dangerouslySetInnerHTML:{__html:S}})]})},g)})})},he=({query:n})=>{const t=()=>{const s=window.location.pathname;let o="";return s.includes("aefaq")?o="after effects":s.includes("prfaq")?o="premiere pro":s.includes("psfaq")?o="photoshop":s.includes("aeexpr")&&(o="after effects expression"),"".concat(n," ").concat(o)};return e.jsxs("div",{children:[e.jsxs("div",{className:"search-external-links",children:[e.jsx("button",{onClick:()=>{window.open("https://yandex.com/search/?text=".concat(encodeURIComponent(t())),"_blank")},children:"Найти в Яндексе"}),e.jsxs("button",{onClick:()=>{window.open("https://www.perplexity.ai/search?q=".concat(encodeURIComponent(t())),"_blank")},children:["Спросить у Perplexity",e.jsx("sup",{children:"1"})]})]}),e.jsxs("p",{className:"search-no-results-tip",children:[e.jsx("sup",{children:"1"})," Perplexity и другие чат-боты с использованием нейросетевых моделей могут выдавать недостоверную информацию"]})]})},it=({query:n})=>e.jsxs("div",{children:[e.jsxs("div",{className:"search-no-results",children:[e.jsxs("p",{className:"search-no-results-title",children:["По вашему запросу на этой странице"," ",e.jsx("span",{style:{color:"var(--summary-text)",fontWeight:600},children:"ничего"})," ","не нашлось"]}),e.jsxs("p",{className:"search-no-results-message",children:["Попробуйте перефразировать свой запрос или выполните поиск в Яндексе или Perplexity",e.jsx("sup",{children:"1"})]})]}),e.jsx(he,{query:n})]}),bt=({sections:n})=>{const{isOpen:t,closeModal:s,isPageLoaded:o}=Le(),[c,l]=i.useState(""),[a,u]=i.useState(!1),[m,d]=i.useState(!1),S=i.useRef([]),g=i.useRef(null),y=i.useRef(null),[h,j]=i.useState(!1),{results:p,selectedResultIndex:b,setSelectedResultIndex:E,debouncedQuery:C,resultsQuery:A}=ct(c,o);i.useEffect(()=>{if(t){const x=setTimeout(()=>{var N,w;(N=g.current)==null||N.focus(),(w=g.current)==null||w.select()},0);return()=>clearTimeout(x)}},[t]),i.useEffect(()=>{const x=y.current;if(!x)return;const N=()=>{j(x.scrollHeight>x.clientHeight&&x.scrollTop+x.clientHeight<x.scrollHeight-1)};return N(),x.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{x.removeEventListener("scroll",N),window.removeEventListener("resize",N)}},[p]),i.useEffect(()=>{if(o){const x=setTimeout(()=>{d(!0)},100);return()=>clearTimeout(x)}else d(!1)},[o,p]);const q=x=>{l(x),x.trim()===""?(u(!1),d(!1)):(u(!0),d(!1))},L=i.useCallback(x=>{var T,I;const N=document.getElementById(x);if(!N)return;const w=N.closest("details");w&&!w.hasAttribute("open")&&w.setAttribute("open","true");const r=(I=(T=document.querySelector("header"))==null?void 0:T.offsetHeight)!=null?I:0,v=N.getBoundingClientRect().top+window.pageYOffset-r-14;window.scrollTo({top:v,behavior:"smooth"});const k=new CustomEvent("open-spoiler-by-id",{detail:{id:x}});window.dispatchEvent(k),s()},[s]);i.useEffect(()=>{const x=N=>{if(!(!t||p.length===0))switch(N.key){case"ArrowDown":N.preventDefault(),E(w=>w<p.length-1?w+1:w);break;case"ArrowUp":N.preventDefault(),E(w=>w>0?w-1:w);break;case"Enter":N.preventDefault(),b>=0&&b<p.length&&L(p[b].id);break}};if(t)return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,p,b,L]),i.useEffect(()=>{var x;if(b>=0){if(window.innerWidth<=768)return;const w=document.querySelector(".search-results"),r=w==null?void 0:w.querySelectorAll(".search-link");(x=r==null?void 0:r[b])==null||x.scrollIntoView({behavior:"smooth",block:"center"})}},[b]),i.useEffect(()=>{const x=y.current;if(!x)return;const N=w=>{if(w.target instanceof HTMLElement&&w.target.tagName==="MARK"){w.stopPropagation();const r=w.target.closest(".search-link");r&&r.click()}};return x.addEventListener("click",N,!0),()=>{x.removeEventListener("click",N,!0)}},[]);const M=()=>a?p.length>0?e.jsxs(e.Fragment,{children:[e.jsx(at,{query:A,resultRefs:S,results:p,selectedResultIndex:b,onLinkClick:L}),e.jsx(he,{query:C})]}):c.trim()!==""&&p.length===0&&m?e.jsx(it,{query:c}):e.jsx(ae,{sections:n,onLinkClick:L}):e.jsx(ae,{sections:n,onLinkClick:L});return e.jsx(P,{closeIcon:null,footer:null,forceRender:!0,open:t,width:850,onCancel:s,children:e.jsx("div",{className:"search",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("input",{ref:g,className:"search-input",placeholder:"Введите что-нибудь для поиска...",style:{cursor:"text"},type:"search",value:c,onChange:x=>q(x.target.value)}),e.jsxs("p",{className:"search-counter",children:[e.jsx("span",{style:{color:"var(--summary-text)",fontWeight:500,fontSize:"1.05em"},children:p.length})," ",Re(p.length)]}),c.trim()!==""&&e.jsx("button",{className:"search-input-clear",style:{cursor:"pointer"},onClick:()=>{l(""),u(!1)},children:e.jsx(Me,{fontSize:"small"})}),e.jsx("button",{className:"search-input-close",onClick:s,children:e.jsx(z,{})})]}),e.jsxs("div",{ref:y,className:"search-results".concat(h?" show-fade":""),children:[M(),h]})]})})})},dt=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(null),c=i.useCallback(m=>{const S=m.target.closest("a[href]");if(S){const g=S.getAttribute("href");g&&/^https?:\/\//.test(g)&&(m.preventDefault(),o(g),t(!0))}},[]),l=i.useCallback(()=>{s&&window.open(s,"_blank","noreferrer"),t(!1),o(null)},[s]),a=i.useCallback(()=>{t(!1),o(null)},[]);return i.useEffect(()=>{const m=d=>{d.key==="Enter"&&l()};return n&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[n,l]),{handleLinkClick:c,ExternalLinkModal:e.jsx(P,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:a,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:s}),e.jsx("button",{className:"modal-header-close",onClick:a,children:e.jsx(z,{})})]}),e.jsx("p",{children:"Вы уверены, что хотите перейти по внешней ссылке?"}),e.jsx("div",{className:"flexible-links",children:e.jsx("button",{onClick:l,children:"Перейти"})})]})})})}},ut=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(null),c=i.useCallback(m=>{const S=m.target.closest('a[href^="#"]');if(S&&S.getAttribute("href").length>1){const y=S.getAttribute("href").substring(1),h=document.getElementById(y);if(h){const j=m.currentTarget.closest("details"),p=h.closest("details");if(p&&j!==p){m.preventDefault();const b=p.querySelector(".faq-summary"),E=b==null?void 0:b.querySelector("h3");let C=E?E.textContent:"без названия";C=C.replace(/^\d+\.\d+\.\s*/,""),o({id:y,title:C}),t(!0)}}}},[]),l=i.useCallback(()=>{if(s){const m=document.getElementById(s.id);m&&m.closest("details")&&window.dispatchEvent(new CustomEvent("open-spoiler-by-id",{detail:{id:s.id}}))}t(!1),o(null)},[s]),a=i.useCallback(()=>{t(!1),o(null)},[]);i.useEffect(()=>{const m=d=>{d.key==="Enter"&&l()};return n&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[n,l]);const u=e.jsx(P,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:a,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Переход на другую статью"}),e.jsx("button",{className:"modal-header-close",onClick:a,children:e.jsx(z,{})})]}),e.jsxs("p",{children:["Вы уверены, что хотите перейти к статье ",e.jsxs("mark",{children:["«",s==null?void 0:s.title,"»"]})," ","на этой странице?"]}),e.jsx("div",{className:"flexible-links",children:e.jsx("button",{onClick:l,children:"Перейти"})})]})})});return{handleLinkClick:c,InternalLinkModal:u}};function mt(n){const t=ce.useRef(void 0);return ce.useEffect(()=>{t.current=n}),t.current}const fe=i.createContext(!1),ht=()=>i.useContext(fe),Z=4,ft=({tags:n})=>{const[t,s]=i.useState(!1),o=i.useMemo(()=>n.split(", ").filter(Boolean),[n]),c=o.length>Z,[l,a]=i.useState([]);if(i.useEffect(()=>{if(c){const g=[...o].sort(()=>.5-Math.random());a(g.slice(0,Z))}},[o,c]),o.length===0)return null;const u=t?o:c?l:o,m=o.length-Z,d=g=>{g.preventDefault(),g.stopPropagation(),s(y=>!y)},S=g=>{const y=g%10,h=g%100;return h>=11&&h<=19?"тегов":y===1?"тег":[2,3,4].includes(y)?"тега":"тегов"};return e.jsxs("span",{className:"faq-tags",children:[u.map(g=>e.jsx("mark",{children:g},g)),c&&e.jsx("mark",{className:"faq-tags-toggle",onClick:d,children:t?"скрыть":"и ещё ".concat(m," ").concat(S(m))})]})},H={SCROLL_DELAY:150,MOUSE_ENTER_DELAY:1e3,PADDING:{MIN:10,MAX:14,SCREEN:{MIN:320,MAX:768}}},J=()=>{var s,o;if(typeof window=="undefined")return{headerHeight:0,padding:0};const n=(o=(s=document.querySelector("header"))==null?void 0:s.offsetHeight)!=null?o:0,t=Math.min(H.PADDING.MIN+(H.PADDING.MAX-H.PADDING.MIN)*((window.innerWidth-H.PADDING.SCREEN.MIN)/(H.PADDING.SCREEN.MAX-H.PADDING.SCREEN.MIN)),H.PADDING.MAX);return{headerHeight:n,padding:t}},pt=(n,t)=>{let s;return o=>{clearTimeout(s),s=setTimeout(()=>n(o),t)}},vt=()=>{const n=Array.from(document.querySelectorAll(".faq-content"));let t="";if(n.forEach((s,o)=>{Array.from(s.querySelectorAll(".faq-summary")).forEach((l,a)=>{t="".concat(o+1,".").concat(a+1),l.hasAttribute("id")||l.setAttribute("id",t)})}),typeof window!="undefined"&&window.location.hash){const s=window.location.hash.slice(1);!document.getElementById(s)&&/^\d+\.\d+$/.test(s)&&(Y.error("Не удалось найти статью по ссылке, возможно он был перемещён или удалён"),history.replaceState(null,"",window.location.pathname+window.location.search))}return t},Et=({title:n,children:t,tag:s})=>{var x,N,w;const{handleLinkClick:o,InternalLinkModal:c}=ut(),{handleLinkClick:l,ExternalLinkModal:a}=dt(),{isAnimationDisabled:u}=be(),m=r=>{o(r),l(r)},[d,S]=i.useState(!1),g=mt(d),[y,h]=i.useState(""),j=i.useRef(null),p=i.useRef(null),b=i.useCallback(pt(r=>{typeof window!="undefined"&&history.replaceState(null,"",window.location.pathname+window.location.search+r)},50),[]),E=i.useCallback(()=>{if(typeof window=="undefined")return;const r=document.querySelectorAll("details[open]");if(r.length>0?document.body.classList.add("body-has-any-spoiler-open"):document.body.classList.remove("body-has-any-spoiler-open"),r.length>0){const f=window.innerHeight;Array.from(r).some(k=>{const T=k.getBoundingClientRect();return!(T.bottom<f*.15||T.top>f*.9)})?document.body.classList.add("has-open-details"):document.body.classList.remove("has-open-details")}else document.body.classList.remove("has-open-details")},[]);i.useEffect(()=>{var te,ne;if(typeof window=="undefined")return;const r=j.current;if(!r)return;const f=r.querySelector(".details-content-wrapper");if(!f)return;const v=f.querySelector(".details-content-inner");if(!v)return;const k=d&&g===!1,T=!d&&g===!0,I=()=>{if(r.open){f.style.maxHeight="".concat(v.scrollHeight,"px");const R=r.offsetHeight;r.style.marginBottom="".concat(R*.01+10,"px")}},B=new ResizeObserver(I);window.addEventListener("resize",I);const ee=R=>{R.target===f&&(document.body.style.overflow="",d?(B.observe(v),I()):(r.open=!1,E()))};if(u)if(d){if(r.open=!0,f.style.maxHeight="".concat(v.scrollHeight,"px"),B.observe(v),I(),E(),setTimeout(()=>{E()},100),k){const R=(te=r.querySelector(".faq-summary"))==null?void 0:te.id;R&&(b("#".concat(R)),setTimeout(()=>{const _=r.querySelector(".faq-summary");if(_){const{headerHeight:V,padding:K}=J(),Q=_.getBoundingClientRect().top+window.pageYOffset-V-K;window.scrollTo({top:Q,behavior:"smooth"})}},150))}}else r.open&&(B.unobserve(v),window.location.hash&&b(""),r.open=!1,f.style.maxHeight="0px",r.style.marginBottom="",E());else if(f.addEventListener("transitionend",ee),(k||T&&r.open)&&(document.body.style.overflow="hidden"),d){r.open=!0;const R=v.scrollHeight,_=window.innerHeight;if(k&&R>_?f.style.maxHeight="".concat(_,"px"):f.style.maxHeight="".concat(R,"px"),E(),setTimeout(()=>{E()},100),k){const V=(ne=r.querySelector(".faq-summary"))==null?void 0:ne.id;V&&(b("#".concat(V)),setTimeout(()=>{const K=r.querySelector(".faq-summary");if(K){const{headerHeight:Q,padding:pe}=J(),xe=K.getBoundingClientRect().top+window.pageYOffset-Q-pe;window.scrollTo({top:xe,behavior:"smooth"})}},150))}}else r.open&&(B.unobserve(v),window.location.hash&&b(""),f.style.maxHeight="0px",r.style.marginBottom="");return()=>{B.disconnect(),f.removeEventListener("transitionend",ee),window.removeEventListener("resize",I),document.body.style.overflow=""}},[d,g,b,E,u]);const C=r=>{if(typeof window=="undefined")return;const{headerHeight:f,padding:v}=J();setTimeout(()=>{const k=r.getBoundingClientRect().top+window.pageYOffset-f-v;window.scrollTo({top:k,behavior:"smooth"})},H.SCROLL_DELAY)};i.useEffect(()=>{if(j.current){const r=j.current.querySelector(".faq-summary");if(r){const f=r.id;if(f)h(f);else{const v=setInterval(()=>{const k=r.id;k&&(h(k),clearInterval(v))},100);return()=>clearInterval(v)}}}},[]),i.useEffect(()=>{if(typeof window=="undefined")return;const r=window.location.hash.slice(1);y&&r===y&&S(!0)},[y]),i.useEffect(()=>{if(typeof window=="undefined")return;const r=f=>{var I;const v=f,{id:k}=v.detail,T=(I=j.current)==null?void 0:I.querySelector(".faq-summary");T&&T.id===k&&S(!0)};return window.addEventListener("open-spoiler-by-id",r),()=>{window.removeEventListener("open-spoiler-by-id",r)}},[]),i.useEffect(()=>{var v;if(typeof window=="undefined")return;const r=window.location.hash.slice(1),f=(v=j.current)==null?void 0:v.querySelector(".faq-summary");r&&f&&f.id===r&&d&&C(f)},[d]),i.useEffect(()=>{if(typeof window=="undefined"||!p.current)return;let r;const f=()=>{r=setTimeout(()=>{var T,I;const k=(I=(T=j.current)==null?void 0:T.querySelector(".faq-summary"))==null?void 0:I.id;k&&history.replaceState(null,"","".concat(window.location.pathname).concat(window.location.search,"#").concat(k))},H.MOUSE_ENTER_DELAY)},v=()=>{clearTimeout(r)};return p.current.addEventListener("mouseenter",f),p.current.addEventListener("mouseleave",v),()=>{var k,T;(k=p.current)==null||k.removeEventListener("mouseenter",f),(T=p.current)==null||T.removeEventListener("mouseleave",v),clearTimeout(r)}},[]),i.useEffect(()=>{typeof window!="undefined"&&(window.detailsSummaryScrollListenerAttached||(window.addEventListener("scroll",E,{passive:!0}),window.detailsSummaryScrollListenerAttached=!0))},[E]);const A=r=>{r.preventDefault();const f=j.current;f&&(f.open?S(!1):S(!0))},q=r=>{var v,k,T;r.preventDefault(),r.stopPropagation();const f=(T=(k=(v=j.current)==null?void 0:v.querySelector(".faq-summary"))==null?void 0:k.id)!=null?T:"";if(!f){Y.warning("Прежде чем копировать ссылку - дождитесь полной загрузки страницы");return}if(typeof window!="undefined"){const I="".concat(window.location.origin).concat(window.location.pathname,"#").concat(f);navigator.clipboard.writeText(I),Y.success("Ссылка на статью ".concat(f," скопирована в буфер обмена"))}},L=(w=(N=(x=j.current)==null?void 0:x.querySelector(".faq-summary"))==null?void 0:N.id)!=null?w:"",M=(y?"".concat(y,". "):"")+n;return e.jsxs(e.Fragment,{children:[e.jsxs("details",{ref:j,className:d?"is-open":"","data-tags":s,children:[e.jsxs("summary",{className:"faq-summary",onClick:A,children:[e.jsxs("div",{className:"faq-summary-left",children:[e.jsx("span",{className:"faq-summary-icon",children:"+"}),e.jsxs("div",{className:"faq-summary-text-content",children:[e.jsx("h3",{children:M}),s&&e.jsx(ft,{tags:s})]})]}),e.jsx(ve,{title:"Скопировать ссылку в буфер обмена",children:e.jsx("button",{className:"copy-button ".concat(L?"":"disabled"),onClick:q,children:e.jsx(de,{})})})]}),e.jsx("div",{className:"details-content-wrapper",children:e.jsx("div",{className:"details-content-inner",children:e.jsx(fe.Provider,{value:d,children:e.jsx("section",{ref:p,className:"faq-section",onClick:m,children:t})})})})]}),c,a]})},$={SCROLL_DELAY:300,PADDING:{MIN:10,MAX:14,SCREEN:{MIN:320,MAX:768}}},xt=()=>{var s,o;const n=(o=(s=document.querySelector("header"))==null?void 0:s.offsetHeight)!=null?o:0,t=Math.min($.PADDING.MIN+($.PADDING.MAX-$.PADDING.MIN)*((window.innerWidth-$.PADDING.SCREEN.MIN)/($.PADDING.SCREEN.MAX-$.PADDING.SCREEN.MIN)),$.PADDING.MAX);return{headerHeight:n,padding:t}},yt=(n,t)=>{let s;return o=>{clearTimeout(s),s=setTimeout(()=>n(o),t)}},St=(n=!0)=>{const{hash:t}=Ee(),s=i.useCallback(yt(o=>{history.replaceState(null,"",window.location.pathname+window.location.search+o)},50),[]);i.useEffect(()=>{t&&n&&setTimeout(()=>{const o=document.querySelector(t);if(o){const{headerHeight:c,padding:l}=xt(),a=o.getBoundingClientRect().top+window.pageYOffset-c-l;window.scrollTo({top:a,behavior:"smooth"}),setTimeout(()=>{history.replaceState(null,"",window.location.pathname+window.location.search)},5e3)}else console.warn("Элемент с якорем ".concat(t," не найден")),history.replaceState(null,"",window.location.pathname+window.location.search)},$.SCROLL_DELAY)},[t,n,s])},Nt=()=>{const[n,t]=i.useState(!1),[s,o]=i.useState(!1),[c,l]=i.useState(!1),a=()=>t(!0),u=()=>t(!1),m=()=>o(!1),d=()=>l(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Te,{type:"info",children:e.jsxs("ul",{children:[e.jsx("li",{children:"Содержание этой страницы периодически обновляется и предоставляется «как есть». Информация в статьях может быть неполной, устаревшей или неточной. Мнение автора и читателя может не совпадать."}),e.jsxs("li",{children:["Если вы хотите сделать ресурс ещё лучше — поделитесь своими замечаниями и идеями через бота ",e.jsx("a",{href:"https://t.me/aechatru_bot",children:"@aechatru_bot"}),"."]})]})}),e.jsx("div",{className:"modal-support",children:e.jsxs("button",{className:"modal-page-button modal-page-button--enhanced",onClick:a,children:[e.jsx(Ie,{}),"Поддержать проект"]})}),e.jsx(P,{centered:!0,closeIcon:null,footer:null,open:n,onCancel:u,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать проект"}),e.jsx("button",{className:"modal-header-close",onClick:u,children:e.jsx(z,{})})]}),e.jsx("p",{children:"Если вам понравился этот сайт и вы хотели бы, чтобы я продолжил развивать его, то вы можете поддержать меня любой суммой и любым удобным вам способом."}),e.jsxs("div",{className:"flexible-links",children:[e.jsx("button",{className:"modal-support-button--sber",onClick:()=>o(!0),children:"Сбербанк"}),e.jsx(P,{centered:!0,className:"modal--support",closeIcon:null,footer:null,open:s,onCancel:m,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать на Сбербанк"}),e.jsx("button",{className:"modal-header-close",onClick:m,children:e.jsx(z,{})})]}),e.jsx("p",{children:"Вы можете перевести из любого банка по номеру банковской карты любую сумму."}),e.jsx("mark",{className:"modal-support-cardnumber--sber",children:"2202202357342488"}),e.jsxs("p",{className:"modal-support-recipient-info",children:["Нажмите на номер карты, чтобы скопировать его в буфер обмена",e.jsx("br",{}),"Получатель: ",e.jsx("mark",{children:"Михаил Денисович Ф."})]})]})})}),e.jsx("button",{className:"modal-support-button--yoomoney",onClick:()=>l(!0),children:"ЮMoney"}),e.jsx(P,{centered:!0,className:"modal--support",closeIcon:null,footer:null,open:c,onCancel:d,children:e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"modal-header-title",children:"Поддержать на ЮMoney"}),e.jsx("button",{className:"modal-header-close",onClick:d,children:e.jsx(z,{})})]}),e.jsx("p",{children:"Для пополнения кошелька вам нужно проделать несколько действий:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Зайдите в приложение своего банка."}),e.jsxs("li",{children:["Откройте раздел ",e.jsx("mark",{className:"select",children:"«Платежи»"})," и найдите в нём категорию"," ",e.jsx("mark",{className:"select",children:"«Электронные кошельки»"})," или"," ",e.jsx("mark",{className:"select",children:"«Финансы»"}),". Обычно в этих разделах можно найти ",e.jsx("mark",{children:"ЮMoney"}),". Также вы можете воспользоваться поиском вашего банка."]}),e.jsxs("li",{children:["Нажмите на номер кошелька снизу, он скопируется в буфер обмена. Вставьте этот номер в поле"," ",e.jsx("mark",{className:"select",children:"«Номер кошелька»"})," приложения вашего банка и введите любую сумму. После этого - подтвердите перевод.",e.jsx(Se.mark,{className:"modal-support-cardnumber--yoomoney",children:"410016763684808"}),e.jsxs("p",{className:"modal-support-recipient-info",children:["Нажмите, чтобы скопировать или пополните баланс автору с помощью"," ",e.jsx("a",{className:"modal-support-yoomoney-link",href:"https://yoomoney.ru/to/410016763684808",children:"этой ссылки"}),"."]})]})]})]})})})]})]})})})]})},kt=({type:n,caption:t,variant:s,theme:o,src:c,imgTitle:l})=>{const a=ht(),[u,m]=i.useState(a);i.useEffect(()=>{if(a)m(!0);else{const r=setTimeout(()=>{m(!1)},350);return()=>clearTimeout(r)}},[a]);const[d,S]=i.useState(!1),[g,y]=i.useState(!1),[h,j]=i.useState(0),p=n==="youtube"?"figure-browser-youtube":"figure-".concat(s||"windows","-").concat(o||"light"),b=s==="windows",E=i.useCallback(()=>{j(window.scrollY),S(!0),y(!1)},[]),C=i.useCallback(()=>{y(!0),setTimeout(()=>{S(!1),y(!1)},250)},[]),A=i.useCallback(()=>{d?C():E()},[d,C,E]),q=i.useCallback(r=>{r.target===r.currentTarget&&C()},[C]);if(i.useEffect(()=>{const r=f=>{f.key==="Escape"&&d&&C()};return d&&document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[d,C]),i.useEffect(()=>{const r=()=>{Math.abs(window.scrollY-h)>window.innerHeight*.25&&C()};return d&&window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[d,C,h]),!u)return null;const L=({label:r,className:f,onClick:v,svgPath:k})=>e.jsx("button",{"aria-label":r,className:f,onClick:v,children:k&&e.jsx("svg",{height:"32",viewBox:"0 0 24 24",width:"32",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:k,fill:"currentColor"})})});let M,x;const N=e.jsxs(e.Fragment,{children:[b&&e.jsx("figcaption",{children:t}),e.jsx("div",{className:"window-controls",children:b?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"minimize",label:"Свернуть",svgPath:"M5 20q-.425 0-.713-.288T4 19q0-.425.288-.713T5 18h14q.425 0 .713.288T20 19q0 .425-.288.713T19 20H5Z",onClick:C}),e.jsx(L,{className:"maximize",label:"Раскрыть",svgPath:"M6 20q-.825 0-1.413-.588T4 18V6q0-.825.588-1.413T6 4h12q.825 0 1.413.588T20 6v12q0 .825-.588 1.413T18 20H6Zm0-2h12V6H6v12ZM6 6v12V6Z",onClick:E}),e.jsx(L,{className:"close",label:"Закрыть",svgPath:"m12 13.4l-4.9 4.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275t.7.275t.275.7t-.275.7L13.4 12l4.9 4.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275z",onClick:C})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"close",label:"Закрыть",onClick:C}),e.jsx(L,{className:"maximize",label:"Раскрыть",onClick:E}),e.jsx(L,{className:"minimize",label:"Свернуть",onClick:C})]})}),!b&&e.jsx("figcaption",{children:t})]}),w=({children:r})=>e.jsxs("div",{children:[e.jsx("div",{className:"window-header",onDoubleClick:A,children:N}),r]});switch(n){case"image":M=e.jsx(w,{children:e.jsx("img",{alt:l,src:c,onClick:A})});break;case"video":M=e.jsx(w,{children:e.jsx("video",{controls:!0,src:c})});break;case"youtube":x=c==null?void 0:c.split("/").pop(),M=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"window-header",children:[e.jsxs("figcaption",{children:[e.jsx("b",{children:"YouTube"}),": ",t]}),e.jsxs("div",{className:"youtube-button",children:[e.jsx("button",{onClick:()=>window.open("https://www.youtube.com/watch?v=".concat(x),"_blank"),children:"Открыть в новой вкладке"}),e.jsx("button",{"aria-label":"Копировать ссылку",onClick:async()=>{await Ae("https://www.youtube.com/watch?v=".concat(x))?Y.success("Ссылка на видео скопирована"):Y.error("Не удалось скопировать ссылку")},children:e.jsx(de,{})})]})]}),e.jsx("iframe",{allowFullScreen:!0,src:"https://www.youtube.com/embed/".concat(x),title:t})]});break;default:M=e.jsx(e.Fragment,{})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"figure-container",children:e.jsx("figure",{className:p,children:M})}),d&&Ne.createPortal(e.jsx("div",{className:"fullscreen-overlay ".concat(g?"closing":""),onClick:q,children:e.jsx("div",{className:"fullscreen-content ".concat(p," ").concat(g?"closing":""),children:M})}),document.body)]})};export{kt as C,Et as D,Nt as S,bt as a,vt as g,St as u};
